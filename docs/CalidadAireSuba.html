<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calidad del Aire - Suba</title>

  <!-- Estilos propios -->
  <link rel="stylesheet" href="estilosCASuba.css" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Turf.js (geo utilidades) -->
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
</head>
<body>

  <!-- Cabecera -->
  <header class="topbar">
    <div class="left">
      <img id="logo" src="./assets/logo_redondo_256.png" alt="Logo Mi Barrio" />
    </div>
    <h1 class="title">Calidad del Aire — Suba</h1>
    <div class="right"></div>
  </header>

  <!-- Menú -->
  <nav class="navbar" aria-label="Menú principal">
    <ul class="menu">
      <li class="menu-item"><a href="index.html" class="menu-link">Inicio</a></li>
    </ul>
  </nav>

  <!-- Contenedor principal 50/50 -->
  <div class="split-container">
    <!-- Izquierda: mapa -->
    <section class="left-map-panel">
      <div id="map" aria-label="Mapa de Suba y estaciones de calidad del aire"></div>
      <div class="map-legend">
        <span class="dot dot-good"></span> Bueno
        <span class="dot dot-moderate"></span> Moderado
        <span class="dot dot-unhealthy"></span> No saludable
        <span class="dot dot-very-unhealthy"></span> Muy no saludable
      </div>
    </section>

    <!-- Derecha: métricas + gráficas -->
    <aside class="right-data-panel">
      <section class="controls">
        <div class="control-row">
          <label for="contaminant-select">Contaminante</label>
          <select id="contaminant-select">
            <option value="" disabled selected>Elige un contaminante</option>
          </select>
        </div>

        <div class="control-row">
          <label for="station-select">Estación</label>
          <select id="station-select" disabled>
            <option value="" disabled selected>Elige una estación</option>
          </select>
        </div>

        <!-- Filtros de fecha -->
        <div class="control-row">
          <label for="date-start">Desde</label>
          <input type="datetime-local" id="date-start">
        </div>
        <div class="control-row">
          <label for="date-end">Hasta</label>
          <input type="datetime-local" id="date-end">
        </div>
        <div class="control-row">
          <button id="btn-apply-range">Aplicar rango</button>
        </div>
      </section>

      <section class="charts">
        <h3>Serie temporal</h3>
        <canvas id="timeseries-chart" height="220"></canvas>
      </section>

      <section class="metrics">
        <div class="meta-row">
          <h2 id="station-title">Seleccione una estación en el mapa</h2>
          <div class="last-update" id="last-update">—</div>
        </div>

        <div class="metrics-grid">
          <div class="metric-card">
            <div class="metric-head">
              <div class="metric-name">PM2.5</div>
              <div class="metric-badge" id="pm25-badge">—</div>
            </div>
            <div class="metric-value"><span id="pm25-val">—</span> <small>µg/m³</small></div>
            <div class="metric-desc">OMS ≤ 15 µg/m³</div>
          </div>

          <div class="metric-card">
            <div class="metric-head">
              <div class="metric-name">PM10</div>
              <div class="metric-badge" id="pm10-badge">—</div>
            </div>
            <div class="metric-value"><span id="pm10-val">—</span> <small>µg/m³</small></div>
            <div class="metric-desc">OMS ≤ 45 µg/m³</div>
          </div>

          <div class="metric-card">
            <div class="metric-head">
              <div class="metric-name">NO₂</div>
              <div class="metric-badge" id="no2-badge">—</div>
            </div>
            <div class="metric-value"><span id="no2-val">—</span> <small>µg/m³</small></div>
            <div class="metric-desc">OMS ≤ 25 µg/m³</div>
          </div>

          <div class="metric-card">
            <div class="metric-head">
              <div class="metric-name">O₃</div>
              <div class="metric-badge" id="o3-badge">—</div>
            </div>
            <div class="metric-value"><span id="o3-val">—</span> <small>µg/m³</small></div>
            <div class="metric-desc">OMS ≤ 100 µg/m³ (8h)</div>
          </div>
        </div>
      </section>

      <section class="charts">
        <h3>Tendencias (últimas 24 h)</h3>
        <canvas id="chart-pm25" height="180"></canvas>
        <canvas id="chart-pm10" height="180"></canvas>
        <canvas id="chart-no2"  height="180"></canvas>
        <canvas id="chart-o3"   height="180"></canvas>
      </section>
    </aside>
  </div>

  <!-- Lógica principal -->
  <script defer src="proyectoCASuba.js"></script>
</body>
</html>

